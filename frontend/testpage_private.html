<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>Private page</h1>
<!-- Logout button -->
<form id="logout_form">
    <input id="logout" type="submit" value="Logout">
</form>

<div>
    <h2>Workout planner schedule mock</h2>
    <form id="devWorkout_planner">
        <label for="devWorkout_name">Schedule name:</label>
        <input id="devWorkout_name" type="text" name="workout_name">
        <input id="devWorkout_name_submit" type="submit" value="Submit">
    </form>
</div>

<div class="devChatFrame">
    <div class="devListContainer">
        <h2>Workouts</h2>
        <button id="fetch_workouts" class="fetch">Fetch workouts</button>
        <div class="devListItem">
            <p>Workout name</p>
        </div>
    </div>
    <div>
        <h2>Chat for selected workout</h2>
        <form>
            <fieldset class="postedMessage">
                <legend>Admin @ 12:53 15/10/2022</legend>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. A ab animi asperiores atque autem debitis
                    dignissimos dolores eaque eligendi facere hic ipsa ipsum iusto modi molestias mollitia, nam neque
                    nostrum praesentium, quasi qui quis quisquam quos repellendus reprehenderit sint tenetur voluptate?
                    Aliquid culpa debitis exercitationem ipsa nam neque rerum voluptate.</p>
            </fieldset>

            <fieldset class="postedMessage">
                <legend>User @ 13:24 15/10/2022</legend>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. A atque commodi dignissimos dolorem est,
                    eveniet expedita fugiat illo incidunt itaque laboriosam molestias odio perspiciatis provident quae
                    qui quia quis quo repellat repudiandae sequi sint sit ullam veniam voluptatibus. Aspernatur
                    consequuntur distinctio earum, ipsum magnam natus optio sed ullam unde voluptate? Harum ullam,
                    voluptates. Accusamus deserunt dignissimos ea impedit itaque modi quis repellat reprehenderit. Ab
                    deleniti dolorum expedita harum illum ipsam itaque odio quisquam sapiente similique! Deleniti
                    dolorum impedit ipsa laborum magni maxime nesciunt placeat porro quos ut? Ab asperiores assumenda
                    autem dolorem dolorum earum magnam, maiores nisi quos rem similique!</p>
            </fieldset>

            <fieldset class="postedMessage">
                <legend>Admin @ 14:53 15/10/2022</legend>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eius harum minima odit? Ea quo, vel?</p>
            </fieldset>

            <form>
                <label for="messageSubmit"></label>
                <textarea id="messageSubmit" name="messageSubmit"
                          placeholder="Write a message. Press submit to send"></textarea>
                <p><input type="submit" value="Submit"></p>
            </form>

        </form>
    </div>
</div>

</body>
<script>
    const form = document.getElementById('logout_form')
    form.addEventListener('submit', logout)

    async function logout(event) {
        event.preventDefault();

        try {
            const result = await fetch('/api/logout', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            }).then((res) => res.json())

            if (result.status === 'ok') {
                alert(result.data)
                // console.log(document.cookie);
                window.location.href = 'index.html'
            } else {
                alert('Error logging out')
            }
        } catch (e) {
            alert('Error logging out')
        }
    }

    // Submit mock schedule
    document.getElementById("devWorkout_name_submit").addEventListener("click", function (e) {
        e.preventDefault();

        const data = {name: document.getElementById("devWorkout_name").value,
        exercises: null};

        fetch('/api/schedule/mock/add', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        }).then(res => res.json())
            .then(res => {
                console.log(res);
                if (res.status === 'ok') {
                    alert('Schedule added!');
                } else {
                    alert('Schedule not added!');
                }
            });
    })
</script>
</html>